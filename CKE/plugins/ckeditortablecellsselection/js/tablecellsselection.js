"use strict";!function(t,e,i,n){function o(e,i){var n=t(i),o=n.data(v.dataKey);o||(l(n),n.data(v.dataKey,$()))}function $(){return{selFrom:!1,selTo:!1,isHighlighted:n,$currTR:t(),$currTH:t(),$currCell:t()}}function l(e){function i(e){function i(e){function i(e){function i(){for(var e=1;e>0;)e=0,f($).each(function(i,n){h.$elemX=t(n).offset().left,h.$elemXwidth=t(n).offset().left+t(n).width(),h.$elemY=t(n).offset().top,h.$elemYheight=t(n).offset().top+t(n).height(),h.$elemX<h.$pointXmin&&h.$elemXwidth>=h.$pointXmin&&h.$elemXwidth<=h.$pointXwidth&&h.$elemYheight<=h.$pointYheight&&h.$elemYheight>h.$pointYmin&&(h.$temp=h.$elemX,h.$temp!=h.$pointXmin&&(h.$pointXmin=h.$temp,e=1)),h.$elemX>=h.$pointXmin&&h.$elemX<h.$pointXwidth&&h.$elemXwidth>=h.$pointXwidth&&h.$elemYheight<=h.$pointYheight&&h.$elemYheight>h.$pointYmin&&(h.$temp=h.$elemXwidth,h.$temp!=h.$pointXwidth&&(h.$pointXwidth=h.$temp,e=1)),h.$elemY<h.$pointYmin&&h.$elemYheight>=h.$pointYmin&&h.$elemYheight<=h.$pointYheight&&h.$elemXwidth<=h.$pointXwidth&&h.$elemXwidth>h.$pointXmin&&(h.$temp=h.$elemY,h.$temp!=h.$pointYmin&&(h.$pointYmin=h.$temp,e=1)),h.$elemY>=h.$pointYmin&&h.$elemY<h.$pointYheight&&h.$elemYheight>=h.$pointYheight&&h.$elemXwidth<=h.$pointXwidth&&h.$elemXwidth>h.$pointXmin&&(h.$temp=h.$elemYheight,h.$temp!=h.$pointYheight&&(h.$pointYheight=h.$temp,e=1)),h.$elemX<h.$pointXmin&&h.$elemXwidth>=h.$pointXwidth&&h.$elemYheight<=h.$pointYheight&&h.$elemYheight>h.$pointYmin&&(h.$temp=h.$elemX,h.$temp<h.$pointXmin&&(h.$pointXmin=h.$temp,e=1)),h.$elemX>h.$pointXmin&&h.$elemX<h.$pointXwidth&&h.$elemY<h.$pointYheight&&h.$elemY>h.$pointYmin&&(h.$temp=h.$elemXwidth,h.$temp>h.$pointXwidth&&(h.$pointXwidth=h.$temp,e=1)),h.$elemY<h.$pointYmin&&h.$elemYheight>=h.$pointYmin&&h.$elemYheight<=h.$pointYheight&&h.$elemXwidth<=h.$pointXwidth&&h.$elemXwidth>h.$pointXmin&&(h.$temp=h.$elemY,h.$temp<h.$pointYmin&&(h.$pointYmin=h.$temp,e=1)),h.$elemY>h.$pointYmin&&h.$elemYheight<=h.$pointYheight&&h.$elemX<=h.$pointXwidth&&(h.$temp=h.$elemYheight,h.$temp>h.$pointYheight&&(h.$pointYheight=h.$temp,e=1))})}function n(t,e){t.$pointX2=e.offset().left,t.$pointX2width=e.offset().left+e.width(),t.$pointY2=e.offset().top,t.$pointY2height=e.offset().top+e.height(),t.$pointX1<t.$pointX2?(t.$pointXmin=t.$pointX1,t.$pointXmax=t.$pointX2):(t.$pointXmin=t.$pointX2,t.$pointXmax=t.$pointX1),t.$pointX1width>t.$pointX2width?t.$pointXwidth=t.$pointX1width:t.$pointXwidth=t.$pointX2width,t.$pointY1<t.$pointY2?(t.$pointYmin=t.$pointY1,t.$pointYmax=t.$pointY2):(t.$pointYmin=t.$pointY2,t.$pointYmax=t.$pointY1),t.$pointY1height>t.$pointY2height?t.$pointYheight=t.$pointY1height:t.$pointYheight=t.$pointY2height}var o=g(e),$=(o.$target,o.$table),l=o.$cell;if(0!=l.length){var h=o.data;if(h.$currCell=l,!C)return!1;var p=w.selectionEnabled;return $.find("."+p).removeClass(p),h.selTo=c(l),n(h,l),i(),r($,h),$.data(h),!0}}function n(t){var e=g(t);if(u(t))return!0;var i=e.$table,n=e.$cell;if(0!=n.length){n.addClass(w.selectionEnabled);var o=e.data;C=!0,o.selFrom=c(n),o.selFrom.$el=n;var $=w.selectedCellClass;return n.hasClass($)&&1===Y(i)?n.removeClass($):(Y(i),n.addClass($)),o.$pointX1=n.offset().left,o.$pointX1width=n.offset().left+n.width(),o.$pointY1=n.offset().top,o.$pointY1height=n.offset().top+n.height(),o.isHighlighted=n.hasClass($),i.data(o),!0}}function o(t){var e=g(t),i=e.data;C=!1,i.selFrom=!1,i.selTo=!1,e.$table.data(i)}function $(i){C=!1,0==t(i.target).closest(e).length&&Y(e)}e.on(X("mouseover"),i).on(X("mousedown"),n).on(X("mouseup"),o),t(e[0].ownerDocument).on(X("click"),$)}function n(t){function e(t){t.originalEvent.clipboardData.setData("text/plain",handler.getSelectedDataAsText()),t.preventDefault()}t.on("copy",e)}i(e),n(e)}s(e),i(e)}function h(t){function e(t){t.unbind("."+v.eventNamespace)}function i(t){t.removeData(v.dataKey)}e(t),i(t),m(t)}function p(t){var e=t.find("table");m(e)}function a(t){var e=t.find("table");s(e)}function m(t){function e(t,e){t.find("."+e).removeClass(e)}t.removeClass(w.selectableTableClass),e(t,w.selectedCellClass),e(t,w.selectionEnabled)}function s(t){t.addClass(w.selectableTableClass)}function r(e,i){Y(e),f(e).each(function(e,n){i.$elemX=t(n).offset().left,i.$elemXwidth=t(n).offset().left+t(n).width(),i.$elemY=t(n).offset().top,i.$elemXheight=t(n).offset().top+t(n).height(),i.$elemX>=i.$pointXmin&&i.$elemXwidth<=i.$pointXwidth&&i.$elemXwidth<=i.$pointXwidth&&i.$elemY>=i.$pointYmin&&i.$elemY<=i.$pointYheight&&i.$elemYheight>=i.$pointYheight&&t(n).addClass(w.selectedCellClass)}),e.trigger("selectionchange."+v.eventNamespace)}function d(t){return t.find("."+w.selectedCellClass)}function c(t){return{x:parseInt(t.attr("data_x")),y:parseInt(t.parent("tr").attr("data_y")),colspan:t.attr("colspan")?parseInt(t.attr("colspan")):0,rowspan:t.attr("rowspan")?parseInt(t.attr("rowspan")):0}}function f(t){return t.find("th, td")}function Y(t){var e=d(t),i=0;return e.removeClass(w.selectedCellClass),i}function X(t){return t+"."+v.eventNamespace}function u(t){var i;return t=t||e.event,"which"in t?i=3==t.which:"button"in t&&(i=2==t.button),i}function g(e){var i=t(e.target),n=i.closest("table");return{$target:i,$table:n,$cell:i.closest("td,th"),data:n.data(v.dataKey)}}var w={},v={dataKey:"cellsSelector",eventNamespace:"cellsselector"},C=!1,b={init:function(e){var i={selectableTableClass:"tcs",selectedCellClass:"tcs-selected",selectionEnabled:"tcs-selection-enabled"};return w=e?t.extend(i,e):i,this.filter("table").each(o)},destroy:function(){return this.each(function(){h(t(this))})},selectedCells:function(){return d(this)},removeDocumentHtmlChanges:p,addDocumentHtmlChanges:a};t.fn.tableCellsSelection=function(e){return b[e]?b[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Метод с именем "+e+" не существует для jQuery.tooltip"):b.init.apply(this,arguments)}}(jQuery,window,document);